 <div class="susong_info"></div> <section class="panel b-a clear m_dataTab"> <div class="panel-body"> <a href="javascript:;" class="btn btn-sm btn-default  m-r-sm c_disable" style="white-space:nowrap;cursor: default">
被执行人信息&nbsp;0
</a> <a href="javascript:;" class="btn btn-sm btn-default  m-r-sm c_disable" style="white-space:nowrap;cursor: default">
失信被执行人&nbsp;0
</a> <a href="javascript:;" onclick="boxScrollNew('#wenshulist');zhugeTrack('企业主页-法律诉讼-裁判文书',{'企业名称':'深圳市比一比网络科技有限公司'});" class="btn btn-sm btn-default  m-r-sm" style="white-space:nowrap;">
裁判文书&nbsp;2
</a> <a href="javascript:;" class="btn btn-sm btn-default  m-r-sm c_disable" style="white-space:nowrap;cursor: default">
法院公告&nbsp;0
</a> <a href="javascript:;" onclick="boxScrollNew('#noticelist');zhugeTrack('企业主页-法律诉讼-开庭公告',{'企业名称':'深圳市比一比网络科技有限公司'});" class="btn btn-sm btn-default  m-r-sm" style="white-space:nowrap;">
开庭公告&nbsp;1
</a> <a href="javascript:;" class="btn btn-sm btn-default  m-r-sm c_disable" style="white-space:nowrap;cursor: default">
送达公告&nbsp;0
</a> <a href="javascript:;" class="btn btn-sm btn-default  m-r-sm c_disable" style="white-space:nowrap;cursor: default">
司法协助&nbsp;0
</a> </div> </section> <section class="panel b-a clear"> <div class="tcaption"> <h3 class="title"> 统计分析</h3> <a class="hchart" onclick="hideChart(this)" href="javascript:;"> <span>收起</span> <i class="i i-arrow-up4"></i> </a> </div> <div class="float-wrap"> <div class="col-sm-6 col-xs-12 no-padding rb"><div id="susong-province" class="nchart-item hmd"></div></div> <div class="col-sm-6 col-xs-12 no-padding" style="padding-left: 7px;"><div id="susong-year" class="nchart-item hmd"></div></div> </div> </section> <section class="panel b-a clear"> <div class="tcaption"> <h3 class="title">裁判文书统计分析</h3> <span class="watermark"></span> </div> <div class="clearfix" style="position: relative;"> <table id="wenshuAnaTable" class="ntable pull-left" style="width: 150px;"> <tr data-option='reasonOption'> <td class="ch">案由统计 TOP10</td> </tr> <tr data-option='participantOption'> <td class="ch">原告/被告统计</td> </tr> <tr data-option='courtlevelOption'> <td class="ch">涉案法院统计</td> </tr> <tr data-option='provinceOption'> <td class="ch">涉案地区分布</td> </tr> <tr data-option='casetypeOption'> <td class="ch">涉案文书类型统计</td> </tr> <tr data-option='submityearOption'> <td class="ch">年度涉案信息统计</td> </tr> <tr data-option='courtmonthOption'> <td class="ch">本年度涉案信息统计</td> </tr> </table> <div id="wenshuAnaChart" class="b-na pull-left m-l-xs" style="width: 730px;height: 308px;"></div> <div id="wenshuAnaTitle" style="position: absolute;top: 10px;left: 172px;right: 50px;font-size: 13px;"></div> <div id="wenshuAnaNodata" class="pnodata" style="position: absolute;left: 450px;top: 30px;display: none;"> <img src="/material/theme/chacha/cms/v2/images/nno_image.png"><p>暂无数据</p></div> </div> </section> <section class="panel clear  b-a" id="wenshulist"> <div class="tcaption"> <h3 class="title"> 裁判文书</h3> <span class="tbadger">2</span> <div class="chooseSusong" data-box="wenshu" style="float: right"> <div class="tdrop"> <span class="btn" data-toggle="dropdown"> <span>全部类型</span> <span class="caret m-l"></span> </span> <ul class="dropdown-menu dropdown-menu-right"> <li><a href="javascript:;" data-option="casetype" data-value="0">不限</a></li> <li><a href="javascript:;" data-option="casetype" data-value="ms">民事案件(2)</a></li> </ul> </div> </div> </div> <table class="ntable ntable-odd"> <tr><th class="tx">序号</th><th>案件名称</th><th>案由</th><th>发布时间</th><th>案件编号</th><th>案件身份</th><th>执行法院</th></tr> <tr> <td class="tx">1</td> <td width=""><a target="_blank" href="/wenshuDetail_com_7dfc9181d6f9049aba4eee1c01e48eb4.html"><h3 class="seo font-14">易帆与深圳市一路无忧科技有限公司网络服务合同纠纷一审民事判决书</h3></a></td> <td width="103">网络服务合同纠纷</td> <td width="103">2016-11-15</td> <td width="15%">（2012）深福法民一初字第1926号</td> <td width="20%"> <div class="m-b-xs">原告 - <a href="/search?key=%E6%98%93%E5%B8%86" class="c_a" target="_blank">易帆</a></div> <div class="m-b-xs">被告 - <a href="/search?key=%E6%B7%B1%E5%9C%B3%E5%B8%82%E4%B8%80%E8%B7%AF%E6%97%A0%E5%BF%A7%E7%A7%91%E6%8A%80%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8" class="c_a" target="_blank">深圳市一路无忧科技有限公司</a></div> </td> <td width="15%">深圳市福田区人民法院</td> </tr> <tr> <td class="tx">2</td> <td width=""><a target="_blank" href="/wenshuDetail_com_8ed2cd2168ae90adb2503216d44fafaa.html"><h3 class="seo font-14">深圳市一路无忧科技有限公司与梁均胜劳动合同纠纷一审民事判决书</h3></a></td> <td width="103">劳动合同纠纷</td> <td width="103"></td> <td width="15%">（2012）深福法民四初字第00988号</td> <td width="20%"> <div class="m-b-xs">原告 - <a href="/search?key=%E6%B7%B1%E5%9C%B3%E5%B8%82%E4%B8%80%E8%B7%AF%E6%97%A0%E5%BF%A7%E7%A7%91%E6%8A%80%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8" class="c_a" target="_blank">深圳市一路无忧科技有限公司</a></div> <div class="m-b-xs">代理律师事务所 - <a href="/search?key=%E5%B9%BF%E4%B8%9C%E9%A6%96%E8%83%9C%E5%BE%8B%E5%B8%88%E4%BA%8B%E5%8A%A1%E6%89%80" class="c_a" target="_blank">广东首胜律师事务所</a></div> <div class="m-b-xs">被告 - <a href="/search?key=%E6%A2%81%E5%9D%87%E8%83%9C" class="c_a" target="_blank">梁均胜</a></div> </td> <td width="15%">广东省深圳市福田区人民法院</td> </tr> </table> <div> </div> </section> <section class="panel b-a clear" id="noticelist"> <div class="tcaption"> <h3 class="title"> 开庭公告</h3> <span class="tbadger">1</span> <span class="watermark"></span> </div> <table class="ntable ntable-odd"> <tr><th class="tx">序号</th><th>案号</th><th>开庭日期</th><th>案由</th><th>公诉人/原告/上诉人/申请人</th><th>被告人/被告/被上诉人/被申请人</th></tr> <tr> <td class="tx">1</td> <td width="120"> <a class="text-primary" class="ktnoticeView" onclick='showRelatModal("ktnotice","0e32f20177b581bef4dca57f6b715dc95")'>(2018)粤0305民初21958号</a> </td> <td width="103">2018-12-25 16:30:00</td> <td width="130">合同纠纷</td> <td width="205">李子晋</td> <td>深圳市比一比网络科技有限公司</td> </tr> </table> <div> </div> </section> <div class="modal fade" id="dnoticeModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog nmodal"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">x</span></button> <h4 class="modal-title">送达公告详情</h4> </div> <div class="modal-body"></div> </div> </div> </div> <div class="modal fade" id="assistanceModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog nmodal"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">x</span></button> <h4 class="modal-title" id="myModalLabel">司法协助详情</h4> </div> <div class="modal-body"> <div id="xzxkview"></div> </div> </div> </div> </div> <section class="panel b-a clear"> <div class="m_ptsc" style="padding:20px 0;">数据来源：中国裁判文书网、中国执行信息公开网、中华人民共和国最高人民法院、人民法院公告网、各地方人民法院。</div> </section> <script type="text/javascript" src="/material/theme/chacha/cms/v2/js/judgeChart.js?time=20181227"></script> <script type="text/javascript">

    function hideChart(dom){
    	if($(dom).find('i').hasClass('i-arrow-up4')){
    		$(dom).find('i').removeClass('i-arrow-up4');
    		$(dom).find('i').addClass('i-arrow-down4')
    		$(dom).find('span').html('展开');
    		$(dom).parent().next().hide();
    	}else{
    		$(dom).find('i').removeClass('i-arrow-down4');
    		$(dom).find('i').addClass('i-arrow-up4')
    		$(dom).find('span').html('收起');
    		$(dom).parent().next().show();
    	}
    	
    }



    $(function(){
    	var zhixing  = JSON.parse('[]');
	    var shixin  = JSON.parse('[]');
	    var wenshuList  = JSON.parse('[{"key":"casetype","items":[{"value":"ms","count":2,"desc":"\u6c11\u4e8b\u6848\u4ef6"}]},{"key":"province","items":[{"value":"GD","count":2,"desc":"\u5e7f\u4e1c"}]},{"key":"submityear","items":[{"value":"2016","count":1,"desc":"2016"},{"value":"","count":1,"desc":""}]},{"key":"courtlevel","items":[{"value":"2","count":2,"desc":"\u57fa\u5c42\u6cd5\u9662"}]},{"key":"courtmonth","items":[{"value":"0","count":2,"desc":""}]},{"key":"casereasontype","items":[{"value":"0032","count":1,"desc":"\u52b3\u52a8\u5408\u540c\u7ea0\u7eb7"},{"value":"0046","count":1,"desc":"\u670d\u52a1\u5408\u540c\u7ea0\u7eb7"}]},{"key":"participant","items":[{"value":"d","count":1,"desc":"\u88ab\u544a"},{"value":"p","count":1,"desc":"\u539f\u544a"}]}]');
	    var gonggaoList  = JSON.parse('null');
	    var noticeList  = JSON.parse('[{"Key":"courtyear","Items":[{"Desc":"2018","Value":"2018","Count":"1"}],"key":"courtyear","items":[{"Desc":"2018","Value":"2018","Count":"1","count":"1","desc":"2018","value":"2018"}]},{"Key":"province","Items":[{"Desc":"\u5e7f\u4e1c","Value":"GD","Count":"1"}],"key":"province","items":[{"Desc":"\u5e7f\u4e1c","Value":"GD","Count":"1","count":"1","desc":"\u5e7f\u4e1c","value":"GD"}]}]');

	    var provinceList = [];
	    var yearData = {
	    	xData:[],
	    	yDatas:[]
	    };

	    function drawSusongChart(){
	    	if(zhixing && zhixing.length>0){
		    	addProvince(zhixing[0]);
		    	countYear(zhixing[2],'被执行人信息');
		    }
		    if(shixin && shixin.length>0){
		    	addProvince(shixin[0]);
		    	countYear(shixin[2],'失信被执行人');
		    }
		    if(wenshuList && wenshuList.length>0){
		    	addProvince(wenshuList[1]);
		    	countYear(wenshuList[2],'裁判文书');
		    }
		    if(gonggaoList && gonggaoList.length>0){
		    	addProvince(gonggaoList[0]);
		    	countYear(gonggaoList[1],'法院公告');
		    }
		    if(noticeList && noticeList.length>0){
		    	addProvince(noticeList[1]);
		    	countYear(noticeList[0],'开庭公告');
		    }

		    yearData.xData.sort(function (a, b) {
		        var pa = 0;
		    	var pb = 0;
		    	if(a!='未知'){
		    		pa = parseInt(a);
		    	}
		    	if(b!='未知'){
		    		pb = parseInt(b);
		    	}
	            return pa - pb;
	        });

		    var unknown = null;
	        yearData.xData.forEach(function (data,index) {
				if(data == '未知'){
	                unknown = data;
	                yearData.xData.splice(index,1);
				}
	        });
	        if(unknown){
	            yearData.xData.push(unknown);
			}

		    if(zhixing && zhixing.length>0){
		    	kateYear(zhixing[2],'被执行人信息');
		    }
		    if(shixin && shixin.length>0){
		    	kateYear(shixin[2],'失信被执行人');
		    }
		    if(wenshuList && wenshuList.length>0){
		    	kateYear(wenshuList[2],'裁判文书');
		    }
		    if(gonggaoList && gonggaoList.length>0){
		    	kateYear(gonggaoList[1],'法院公告');
		    }
		    if(noticeList && noticeList.length>0){
		    	kateYear(noticeList[0],'开庭公告');
		    }

		    var yearDataStr = '{"xData":["2015","2016","2017"],"yDatas":[{"name":"被执行人信息","index":0,"value":[3,3,4]},{"name":"失信被执行人","index":1,"value":[1,3,3]},{"name":"裁判文书","index":2,"value":[5,6,2]},{"name":"法院公告","index":3,"value":[3,5,2]}]}'


		    chartUtil.drawMap(provinceList,"susong-province",1,'法律诉讼省份分布');

		    chartUtil.drawBarMuti(yearData,"susong-year",1,'法律诉讼年份分布');
	    }
	    

	    function addProvince(list){
	    	if(list && list.items){
	    		list.items.forEach(function(obj){
		    		var province = containsProvince(provinceList,obj);
		    		if(!province){
		    			provinceList.push({
		    			value: parseInt(obj.count),
	                	name: obj.desc,
		    		})
		    		}else{
		    			province.value+=parseInt(obj.count);
		    		}
		    		
		    	})
	    	}else{

	    	}
	    	
	    	
	    }

	    function containsProvince(provinceList,obj){
	    	for(var i=0;i<provinceList.length;i++){
	    		if(provinceList[i].name==obj.desc){
	    			return provinceList[i];
	    		}
	    	}
	    	return null;
	    }

	    function countYear(list,title){
	    	if(!list || !list.items){
	    		return;
	    	} 
	    	list.items.forEach(function(obj){
	    		var year = containsYear(yearData.xData,obj);
	    		if(!year){
	    			if(obj.value==""){
	    				obj.value="未知"
	    			}
	    			yearData.xData.push(obj.value)
	    			
	    		}
	    	});
	    	yearData.yDatas.push({
	    		name:title,
	    		index:yearData.yDatas.length,
	    		value:[]
	    	});
	    	
	    }

	    

	    function containsYear(yearList,obj){
	    	for(var i=0;i<yearList.length;i++){
	    		if(yearList[i]==obj.value){
	    			return yearList[i];
	    		}
	    	}
	    	return null;
	    }

	    function kateYear(list,title){
	    	var index = getIndex(title,yearData.yDatas);
	    	yearData.xData.forEach(function(year){
	    		var item = containsYear2(list.items,year);
	    		if(item){
    				yearData.yDatas[index].value.push(item.count);
	    		}else{
	    			yearData.yDatas[index].value.push(0);
	    		}
	    	});
	    }

	    function containsYear2(yearList,year){
	    	for(var i=0;i<yearList.length;i++){
	    		if(yearList[i].value==year){
	    			return yearList[i];
	    		}
	    	}
	    	return null;
	    }

	    function getIndex(title,yDatas){
	    	for(var i=0;i<yDatas.length;i++){
	    		if(yDatas[i].name==title){
	    			return yDatas[i].index;
	    		}
	    	}
	    }



	    $('.chooseSusong').find('a').on('click',function(){
            var targetDiv = $(this).parent().parent().parent().parent();
            var target = targetDiv.attr('data-box');

            var ajaxData = {};

            switch(target){
                case 'wenshu':
                    ajaxData['box'] = 'wenshu';
                    break;
                default :
                    break;
            }
            var option = $(this).attr('data-option');
            var value = $(this).attr('data-value');
            var text = $(this).text();
            $("input[name=" + option + "]").val(value);
            $("input[name=" + option + "]").attr('data-desc',text);
            //拼接其他参数
            ajaxData[option] = value;
            ajaxData['unique'] = $("#unique").val();
            ajaxData['companyname'] = $("#companyname").val();
            ajaxData['tab'] = 'susong';
            ajaxData['p'] = '1';
            getTabListNew(ajaxData);
        });

        judgeChart(wenshuList);

        	    drawSusongChart();
	        });

		
      
    </script>
